homeassistant:

automation:
  - alias: Alarm night armed notify phone
    trigger:
      - platform: state
        entity_id: alarm_control_panel.house_alarm
        to: armed_night
    action:
      - service: notify.phones
        data:
          title: Alarm
          message: Night Armed
          data:
            actions:
              - action: downstairs_lights_off
                title: Downstairs Lights Off
              - action: all_lights_off
                title: All Lights Off

  - alias: Alarm night armed downstairs lights off
    trigger:
      - platform: event
        event_type: mobile_app_notification_action
        event_data:
          action: downstairs_lights_off
    action:
      - service: script.turn_on
        data:
          entity_id:
            - script.downstairs_lights_off
      - delay: "00:01:00" # delay and then repeat this as zwave is flakey
      - service: script.turn_on
        data:
          entity_id:
            - script.downstairs_lights_off

  - alias: Alarm night armed all lights off
    trigger:
      - platform: event
        event_type: mobile_app_notification_action
        event_data:
          action: all_lights_off
    action:
      - service: script.turn_on
        data:
          entity_id:
            - script.all_lights_off
      - delay: "00:01:00" # delay and then repeat this as zwave is flakey
      - service: script.turn_on
        data:
          entity_id:
            - script.all_lights_off
